function Debouncer(e){this.callback=e,this.ticking=!1}window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame,Fluid.utils={listenScroll:function(e){var t=new Debouncer(e);return window.addEventListener("scroll",t,!1),t.handleEvent(),t},unlistenScroll:function(e){window.removeEventListener("scroll",e)},scrollToElement:function(e,t){var n=jQuery(e).offset();n&&jQuery("html,body").animate({scrollTop:n.top+(t||0),easing:"swing"})},elementVisible:function(e,t){t=t&&0<=t?t:0;var n=e.getBoundingClientRect(),i=window.innerHeight||document.documentElement.clientHeight,o=n.top;return 0<=o&&o<=i*(t+1)||o<=0&&o>=-i*t-n.height},waitElementVisible:function(e,n,i){var t="undefined"!=typeof window,o=t&&!("onscroll"in window)||"undefined"!=typeof navigator&&/(gle|ing|ro|msn)bot|crawl|spider|yand|duckgo/i.test(navigator.userAgent);function r(e){if(Fluid.utils.elementVisible(e,i))n();else if("IntersectionObserver"in window)new IntersectionObserver(function(e,t){e[0].isIntersecting&&(n(),t.disconnect())},{threshold:[0],rootMargin:(window.innerHeight||document.documentElement.clientHeight)*i+"px"}).observe(e);else var t=Fluid.utils.listenScroll(function(){Fluid.utils.elementVisible(e,i)&&(Fluid.utils.unlistenScroll(t),n())})}t&&!o&&(i=i&&0<=i?i:0,"string"==typeof e?this.waitElementLoaded(e,function(e){r(e)}):r(e))},waitElementLoaded:function(i,o){var e="undefined"!=typeof window,t=e&&!("onscroll"in window)||"undefined"!=typeof navigator&&/(gle|ing|ro|msn)bot|crawl|spider|yand|duckgo/i.test(navigator.userAgent);e&&!t&&("MutationObserver"in window?new MutationObserver(function(e,t){var n=document.querySelector(i);n&&(o(n),t.disconnect())}).observe(document,{childList:!0,subtree:!0}):document.addEventListener("DOMContentLoaded",function(){var t=function(){var e=document.querySelector(i);e?o(e):setTimeout(t,100)};t()}))},createScript:function(e,t){var n=document.createElement("script");n.setAttribute("src",e),n.setAttribute("type","text/javascript"),n.setAttribute("charset","UTF-8"),n.async=!1,"function"==typeof t&&(window.attachEvent?n.onreadystatechange=function(){var e=n.readyState;"loaded"!==e&&"complete"!==e||(n.onreadystatechange=null,t())}:n.onload=t);var i=document.getElementsByTagName("script")[0]||document.getElementsByTagName("head")[0]||document.head||document.documentElement;i.parentNode.insertBefore(n,i)},createCssLink:function(e){var t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("type","text/css"),t.setAttribute("href",e);var n=document.getElementsByTagName("link")[0]||document.getElementsByTagName("head")[0]||document.head||document.documentElement;n.parentNode.insertBefore(t,n)},loadComments:function(e,t){var n=document.querySelector("#comments[lazyload]");if(n){Fluid.utils.waitElementVisible(e,function(){t(),n.removeAttribute("lazyload")},CONFIG.lazyload.offset_factor)}else t()}},Debouncer.prototype={constructor:Debouncer,update:function(){this.callback&&this.callback(),this.ticking=!1},requestTick:function(){this.ticking||(requestAnimationFrame(this.rafCallback||(this.rafCallback=this.update.bind(this))),this.ticking=!0)},handleEvent:function(){this.requestTick()}};